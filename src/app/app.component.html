
<div class="container mt-5">
  <div class="row">
    <div class="col-md-10 offset-md-1">
    <h2><strong>Mat Reactive Form !!!</strong></h2>
    <mat-card class="custom-card mb-4">
      <mat-card-content>
        <form [formGroup]="signUpForm" (ngSubmit)="onSignUp()">

          <!-- ======= UserName Field ======= -->

          <mat-form-field appearance="fill">
            <mat-label>userName</mat-label>
            <input matInput formControlName="userName">
           <mat-error *ngIf="f['userName'].touched && f['userName'].hasError('required')">
            userName is a required field.
           </mat-error>
           <mat-error  *ngIf="f['userName'].dirty && f['userName'].hasError('pattern')">
            userName should contain alphabets only...
           </mat-error>
           <mat-error *ngIf="f['userName'].dirty  && f['userName'].hasError('minlength')">
            minLength of userName should be
            {{f['userName'].errors?.['minlength'].requiredLength}} and actual length is 
            {{f['userName'].errors?.['minlength'].actualLength}}
           </mat-error>
           <mat-error *ngIf="f['userName'].dirty  && f['userName'].hasError('maxlength')">
            maxLength of userName should be
            {{f['userName'].errors?.['maxlength'].requiredLength}} and actual length is 
            {{f['userName'].errors?.['maxlength'].actualLength}}
           </mat-error>
           <mat-error *ngIf="f['userName'].hasError('noSpaceBar')">
            {{f['userName'].errors?.['noSpaceBar']}}
           </mat-error>
          </mat-form-field>

          <!-- ======= Email Field ======= -->

          <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email">
           <mat-error *ngIf="f['email'].touched && f['email'].hasError('required')">
            Email is a required field.
           </mat-error>
           <mat-error  *ngIf="f['email'].dirty && f['email'].hasError('pattern')">
            "Please enter a valid email address (e.g., user@example.com)."
           </mat-error>
          </mat-form-field>

          <!-- ======= EmpId Field ======= -->

          <mat-form-field appearance="fill">
            <mat-label>Emp Id</mat-label>
            <input matInput formControlName="empId">
           <mat-error *ngIf="f['empId'].touched && f['empId'].hasError('required')">
            EmpId is a required field.
           </mat-error>
           <mat-error  *ngIf="f['empId'].dirty && f['empId'].hasError('invalidEmpId')">
            {{f['empId'].errors?.['invalidEmpId']}}
           </mat-error>
          </mat-form-field>

          <!-- ======= Gender Field ======= -->

            <mat-label>Gender</mat-label>
            <div>
              <mat-radio-group formControlName="gender">
                <mat-radio-button value="male">Male</mat-radio-button>
                <mat-radio-button value="female">Female</mat-radio-button>
                <mat-radio-button value="Other">Other</mat-radio-button>
              </mat-radio-group>
            </div>

          <!-- ======= Address Field ======= -->

           <mat-card class="mb-3">
            <mat-card-header>
              <mat-card-title>
                Address Setting
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <mat-checkbox formControlName="isAddSame">
                Use Current Address as permanent Address.
              </mat-checkbox>
            </mat-card-content>
           </mat-card>
           <div class="row">
             <!-- ======= currentAddress Field ======= -->
            <div class="col-md-6">
             <div formGroupName="currentAddress">
              <mat-card class="mb-3">
                <mat-card-header>
                  <mat-card-title>
                    Current Address
                  </mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <div class="row">
                    <div class="col-md-3">
                      <mat-form-field appearance="outline">
                       <mat-label>Country</mat-label>
                       <mat-select formControlName="country">
                        <mat-option *ngFor="let country of countriesArr" [value]="country.Country">
                          {{country.Country}}
                        </mat-option>
                       </mat-select>
                      </mat-form-field>
                      <mat-error *ngIf="f['currentAddress'].get('country')?.hasError('required')">
                        Country is a required field.
                      </mat-error>
                    </div>
                    <div class="col-md-3">
                      <mat-form-field appearance="outline">
                        <mat-label>State</mat-label>
                        <input type="text" matInput formControlName="state">
                        <mat-error *ngIf="f['currentAddress'].get('state')?.hasError('required')">
                          State is a required field.
                        </mat-error>
                        <mat-error *ngIf="f['currentAddress'].get('state')?.hasError('pattern')">
                          State contains alphabets Only.
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-3">
                      <mat-form-field appearance="outline">
                        <mat-label>City</mat-label>
                        <input type="text" matInput formControlName="city">
                        <mat-error *ngIf="f['currentAddress'].get('city')?.hasError('required')">
                          City is a required field.
                        </mat-error>
                        <mat-error *ngIf="f['currentAddress'].get('city')?.hasError('pattern')">
                          City contains alphabets Only.
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-3">
                      <mat-form-field appearance="outline">
                        <mat-label>Pincode</mat-label>
                        <input type="text" matInput formControlName="pincode">
                        <mat-error *ngIf="f['currentAddress'].get('pincode')?.hasError('required')">
                          Pincode is a required field.
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
             </div>
            </div>

             <!-- ======= permanentAddress Field ======= -->
            <div class="col-md-6">
              <div formGroupName="permanentAddress">
               <mat-card class="mb-3">
                 <mat-card-header>
                   <mat-card-title>
                     Permanent Address
                   </mat-card-title>
                 </mat-card-header>
                 <mat-card-content>
                   <div class="row">
                     <div class="col-md-3">
                       <mat-form-field appearance="outline">
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                         <mat-option *ngFor="let country of countriesArr" [value]="country.Country">
                           {{country.Country}}
                         </mat-option>
                        </mat-select>
                       </mat-form-field>
                     </div>
                     <div class="col-md-3">
                       <mat-form-field appearance="outline">
                         <mat-label>State</mat-label>
                         <input type="text" matInput formControlName="state">
                         <mat-error *ngIf="f['permanentAddress'].get('state')?.hasError('required')">
                           State is a required field.
                         </mat-error>
                         <mat-error *ngIf="f['permanentAddress'].get('state')?.hasError('pattern')">
                          State contains alphabets Only.
                        </mat-error>
                       </mat-form-field>
                     </div>
                     <div class="col-md-3">
                       <mat-form-field appearance="outline">
                         <mat-label>City</mat-label>
                         <input type="text" matInput formControlName="city">
                         <mat-error *ngIf="f['permanentAddress'].get('city')?.hasError('required')">
                           City is a required field.
                         </mat-error>
                         <mat-error *ngIf="f['permanentAddress'].get('city')?.hasError('pattern')">
                          City contains alphabets Only.
                        </mat-error>
                       </mat-form-field>
                     </div>
                     <div class="col-md-3">
                       <mat-form-field appearance="outline">
                         <mat-label>Pincode</mat-label>
                         <input type="text" matInput formControlName="pincode">
                         <mat-error *ngIf="f['permanentAddress'].get('pincode')?.hasError('required')">
                           Pincode is a required field.
                         </mat-error>
                       </mat-form-field>
                     </div>
                   </div>
                 </mat-card-content>
               </mat-card>
              </div>
             </div>
          </div>

          <!-- ======= Skilss Array Field ======= -->

          <mat-card class="mb-4">
            <mat-card-header>
              <mat-card-title>
                Skills*
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <mat-chip-list #chipList aria-label="skills selection">
                <mat-chip
                  *ngFor="let skill of skillsArr.controls;let i=index"
                  (removed)="remove(i)"
                  >
                  {{skill.value}}
                  <button matChipRemove>
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip>
                <input
                  [formControl]="newFormControl"
                  placeholder="New skill..."
                  [matChipInputFor]="chipList"
                  (matChipInputTokenEnd)="addSkill()"
                  >
              </mat-chip-list>
            </mat-card-content>
          </mat-card>

          <!-- ======= Dependants Array Field ======= -->

          <mat-card class="mb-3">
            <mat-card-header>
              <mat-card-title>
                Dependents 
              </mat-card-title>
            </mat-card-header>
            <mat-card-content formArrayName="dependents">
              <div *ngFor="let dependent of dependentsArr.controls; let i=index"
              [formGroupName]="i">
                 <div class="dependent-card">
                   <mat-card class="mb-3">
                    <mat-card-content>
                      <mat-card-title>
                        Dependent {{i+1}}
                        <button mat-icon-button type="button" *ngIf="i>0" (click)="OnRemove(i)">
                          <mat-icon color="warn">delete</mat-icon>
                         </button>
                      </mat-card-title>
                    </mat-card-content>
                    <mat-card-content>
                      <div class="row">
                        <div class="col-md-3">
                          <mat-form-field appearance="fill">
                            <input formControlName="fullName" matInput placeholder="Full Name" type="text">
                          </mat-form-field>
                        </div>
                        <div class="col-md-3">
                          <mat-form-field appearance="fill">
                            <input formControlName="relationShip" matInput placeholder="RelationShip" type="text">
                          </mat-form-field>
                        </div>
                        <div class="col-md-3">
                          <mat-form-field appearance="fill">
                            <input formControlName="citizenShip" matInput placeholder="CitizenShip" type="text">
                          </mat-form-field>
                        </div>
                        <div class="col-md-3">
                          <mat-form-field appearance="fill">
                            <mat-label>Traveling With You?</mat-label>
                              <mat-select formControlName="isTravelingWithYou">
                                <mat-option value="yes">Yes</mat-option>
                                <mat-option value="no">No</mat-option>
                              </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </mat-card-content>
                   </mat-card>
                 </div>
              </div>
              <button mat-raised-button color="primary" type="button" 
              (click)="createDependant()">Add Dependent</button>
            </mat-card-content>
          </mat-card>

          <!-- ======= password Field ======= -->

          <div class="row">
            <!-- ======= password Field ======= -->
            <div class="col-md-6">
              <mat-form-field appearance="fill">
                <input type="text" matInput placeholder="password" formControlName="password">
              </mat-form-field>
              <mat-error *ngIf="f['password'].touched && f['password'].hasError('required')">
                Password is a required field.
               </mat-error>
               <mat-error  *ngIf="f['password'].dirty && f['password'].hasError('pattern')">
                Password must include letters, numbers, and symbols.
               </mat-error>
            </div>
            <!-- ======= ConfirmPassword Field ======= -->
            <div class="col-md-6">
              <mat-form-field appearance="fill">
                <input type="text" matInput placeholder="Confirm Password" 
                formControlName="confirmPassword">
              </mat-form-field>
              <mat-error *ngIf="f['confirmPassword'].dirty && 
              f['confirmPassword'].hasError('passAndConfirmMatch')">
                {{f['confirmPassword'].errors?.['passAndConfirmMatch']}}
               </mat-error>
            </div>
          </div>
          <button mat-raised-button color="accent">Sign Up Form</button>
       </form>
      </mat-card-content>
    </mat-card>
    </div>
  </div>
</div>